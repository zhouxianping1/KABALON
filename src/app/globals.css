@tailwind base;
@tailwind components;
@tailwind utilities;

html {
  overflow-x: hidden;
  /* 确保浮动按钮不被裁剪 */
  position: relative;
}

body {
  @apply bg-white text-slate-900 antialiased;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
    sans-serif;
  line-height: 1.6;
  /* 确保浮动按钮不被裁剪 */
  position: relative;
  overflow-x: hidden;
  overflow-y: auto;
}

h1,
h2,
h3,
h4 {
  @apply font-semibold text-slate-900;
}

p,
li {
  @apply leading-relaxed;
}

/* 品牌色变量 */
:root {
  --brand-blue: #0A52A1;
}

/* 浮动电话按钮样式 - 确保在移动端可见并与 Zalo 按钮对齐 */
.floating-phone-button {
  position: fixed !important;
  bottom: 52px !important; /* 向上移动，与 Zalo 按钮对齐 */
  /* left: 16px !important; */ /* 向右移动：增加这个值，例如 20px, 24px, 30px 等 */
  left: 40px !important; /* 当前值：16px，增加此值可向右移动向 Zalo 图标 */
  z-index: 99998 !important;
  display: flex !important;
  align-items: flex-end !important; /* 确保底部对齐 */
  visibility: visible !important;
  opacity: 1 !important;
  pointer-events: auto !important;
  /* 确保不被任何元素遮挡 */
  transform: translateZ(0) !important;
  -webkit-transform: translateZ(0) !important;
  /* 确保按钮在最上层 */
  isolation: isolate;
  /* 确保按钮可见 */
  will-change: transform;
  /* 确保波纹效果可以溢出显示 */
  overflow: visible !important;
}

@media (min-width: 640px) {
  .floating-phone-button {
    bottom: 55px !important; /* 桌面端也向上移动，与 Zalo 按钮对齐 */
    /* left: 24px !important; */ /* 向右移动：增加这个值，例如 28px, 32px, 40px 等 */
    left: 75px !important; /* 当前值：24px，增加此值可向右移动向 Zalo 图标 */
  }
}

/* Zalo Widget 基础样式 - 确保与电话按钮对齐 */
.zalo-chat-widget {
  /* 让 SDK 完全控制样式，不添加强制定位 */
  display: block;
  pointer-events: auto;
  /* 确保移动端触摸友好 */
  touch-action: manipulation;
  /* 确保底部对齐 */
  line-height: 0;
}

/* 确保 Zalo Widget 外层容器与电话按钮垂直对齐 */
/* 移动端和桌面端都确保按钮底部对齐 */
.zalo-chat-widget iframe,
.zalo-chat-widget > div,
.zalo-chat-widget > div > div {
  vertical-align: bottom !important;
  display: block !important;
}

/* 电话按钮波纹扩散动画 */
@keyframes phoneRipple {
  0% {
    transform: translate(-50%, -50%) scale(1);
    opacity: 0.8;
  }
  100% {
    transform: translate(-50%, -50%) scale(1.75);
    opacity: 0;
  }
}

/* 电话图标抖动动画 - 一长3短抖动效果 */
@keyframes phoneShake {
  0% {
    transform: rotate(0deg);
  }
  15% {
    transform: rotate(10deg);
  }
  30% {
    transform: rotate(-10deg);
  }
  45% {
    transform: rotate(0deg);
  }
  /* 第一次短抖动 - 快速 */
  50% {
    transform: rotate(8deg);
  }
  52% {
    transform: rotate(0deg);
  }
  /* 第二次短抖动 - 快速 */
  54% {
    transform: rotate(-8deg);
  }
  56% {
    transform: rotate(0deg);
  }
  /* 第三次短抖动 - 快速 */
  58% {
    transform: rotate(8deg);
  }
  60% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(0deg);
  }
}

/* 电话按钮图标容器 - 相对定位用于波纹效果 */
.phone-button-icon-wrapper {
  position: relative;
  overflow: visible !important;
}

/* 波纹效果层 */
.phone-ripple {
  position: absolute;
  top: 50%;
  left: 50%;
  width: 56px;
  height: 56px;
  border-radius: 50%;
  border: 2px solid #ef4444;
  pointer-events: none;
  z-index: 0;
  transform: translate(-50%, -50%) scale(1);
  transform-origin: center center;
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

/* 三个波纹层，延迟不同以实现连续波纹效果 */
.phone-ripple-1 {
  animation: phoneRipple 2s ease-out infinite;
  animation-delay: 0s;
}

.phone-ripple-2 {
  animation: phoneRipple 2s ease-out infinite;
  animation-delay: 0.67s;
}

.phone-ripple-3 {
  animation: phoneRipple 2s ease-out infinite;
  animation-delay: 1.33s;
}

/* 电话图标抖动动画 */
.phone-icon-shake {
  animation: phoneShake 1s ease-in-out infinite;
  transform-origin: center;
  will-change: transform;
}
